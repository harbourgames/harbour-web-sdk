{"version":3,"file":"harbour-web-sdk.min.js","sources":["../src/tools/util.js","../src/payments.js","../src/ui.js","../src/player.js","../src/context.js","../src/index.js"],"sourcesContent":["\nexport function asyncSeries(list,callback) {\n  function _run(index,list,callback) {\n    const item = list[index];\n    if (item) {\n      item(err => {\n        if (err) {\n          callback(err);\n        } else {\n          _run(index + 1,list,callback);\n        }\n      });\n    } else {\n      callback();\n    }\n  }\n  _run(0,list,callback);\n}\n\nexport function resolveStyles(...args) {\n  const obj = {};\n\n  function _addStyle(arg) {\n    if (Array.isArray(arg)) {\n      arg.forEach(_addStyle);\n    } else {\n      for (const key in arg) {\n        obj[key] = arg[key];\n      }\n    }\n  }\n\n  _addStyle(args);\n\n  let s = \"\";\n  for (const key in obj) {\n    const val = obj[key];\n    s += key + \":\" + val + \";\";\n  }\n  return s;\n}\n","\nexport const payments = {\n  onReady,\n  getCatalogAsync,\n  purchaseAsync,\n  consumePurchaseAsync,\n};\n\nfunction onReady() {\n}\nfunction getCatalogAsync() {\n}\nfunction purchaseAsync() {\n}\nfunction consumePurchaseAsync() {\n}\n","\nimport { resolveStyles } from \"./tools/util.js\";\n\nexport default {\n  addLoader,\n  removeLoader,\n  setLoaderText,\n  addLoginButton,\n  removeLoginButton,\n};\n\nconst styles = {\n  loader: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: \"black center center no-repeat\",\n    \"background-size\": \"cover\",\n\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n  },\n  cover: {\n    \"z-index\": \"0\",\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: \"rgba(0,0,0,0.5)\",\n\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n  },\n  middleLoader: {\n    \"z-index\": \"1\",\n    position: \"relative\",\n    width: \"100px\",\n    height: \"100px\",\n    \"border-radius\": \"50%\",\n    overflow: \"hidden\",\n  },\n  icon: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    margin: \"10px\",\n    \"border-radius\": \"50%\",\n    background: \"#333 center center no-repeat\",\n    \"background-size\": \"cover\",\n  },\n  spinner: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    border: \"10px solid\",\n    \"border-color\": \"blue black blue black\",\n    \"border-radius\": \"50%\",\n    animation: \"harbour-loader-spinner 2s linear infinite\",\n  },\n  loaderText: {\n    \"z-index\": \"1\",\n    \"margin-top\": \"20px\",\n    color: \"white\",\n    \"font-size\": \"16px\",\n    \"font-weight\": \"bold\",\n    \"font-family\": \"sans-serif\",\n  },\n  loginButton: {\n    position: \"absolute\",\n    bottom: \"60px\",\n    \"margin-left\": \"auto\",\n    \"margin-right\": \"auto\",\n    height: \"40px\",\n    width: \"236px\",\n\n    background: \"#4267b2\",\n    \"border-radius\": \"4px\",\n    cursor: \"pointer\",\n\n    display: \"flex\",\n    \"flex-direction\": \"row\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n  },\n  loginIcon: {\n    position: 'absolute',\n    top: \"8px\",\n    left: \"10px\",\n    width: \"24px\",\n    height: \"24px\",\n  },\n  loginText: {\n    \"margin-left\": \"24px\",\n    \"margin-top\": \"2px\",\n    color: \"white\",\n    \"font-family\": \"Helvetica, Arial, sans-serif\",\n    \"font-size\": \"16px\",\n  },\n}\n\nfunction addLoader(opts) {\n  let loader_style;\n  if (opts && opts.backgroundImage) {\n    const style = { \"background-image\": \"url(\" + opts.backgroundImage + \")\" };\n    loader_style = resolveStyles([styles.loader,style]);\n  } else {\n    loader_style = resolveStyles(styles.loader);\n  }\n  let icon_style;\n  if (opts && opts.iconImage) {\n    const style = { \"background-image\": \"url(\" + opts.iconImage + \")\" };\n    icon_style = resolveStyles([styles.icon,style]);\n  } else {\n    icon_style = resolveStyles(styles.icon);\n  }\n\n  const html =\n`<div id=\"harbour-loader\" style=\"${loader_style}\">\n  <div style=\"${resolveStyles(styles.cover)}\"></div>\n    <div style=\"${resolveStyles(styles.middleLoader)}\">\n      <div style=\"${resolveStyles(styles.spinner)}\"></div>\n      <div style=\"${icon_style}\"></div>\n    </div>\n    <div id=\"harbour-loader-text\" style=\"${resolveStyles(styles.loaderText)}\">0% Loaded</div>\n\n</div>`;\n\n  const temp = document.createElement(\"div\");\n  temp.innerHTML = html;\n\n  document.body.appendChild(temp.firstChild);\n\n  const css =\n`@keyframes harbour-loader-spinner {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n`;\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n}\n\nfunction removeLoader() {\n  const el = document.getElementById(\"harbour-loader\");\n  document.body.removeChild(el);\n}\n\nfunction setLoaderText(text) {\n  const text_el = document.getElementById(\"harbour-loader-text\");\n  text_el.innerText = text\n}\nfunction addLoginButton() {\n  const loader = document.getElementById(\"harbour-loader\");\n\n  const html =\n`<div id=\"harbour-loader-login-button\" style=\"${resolveStyles(styles.loginButton)}\" onclick=\"window.HarbourSDK.player.onLoginButtonPress()\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"${resolveStyles(styles.loginIcon)}\" viewBox=\"0 0 216 216\" color=\"#FFFFFF\">\n    <path fill=\"#FFFFFF\" d=\"\n            M204.1 0H11.9C5.3 0 0 5.3 0 11.9v192.2c0 6.6 5.3 11.9 11.9\n            11.9h103.5v-83.6H87.2V99.8h28.1v-24c0-27.9 17-43.1 41.9-43.1\n            11.9 0 22.2.9 25.2 1.3v29.2h-17.3c-13.5 0-16.2 6.4-16.2\n            15.9v20.8h32.3l-4.2 32.6h-28V216h55c6.6 0 11.9-5.3\n            11.9-11.9V11.9C216 5.3 210.7 0 204.1 0z\">\n    </path>\n  </svg>\n  <div style=\"${resolveStyles(styles.loginText)}\">Continue With Facebook</div>\n</div>`;\n\n  const temp = document.createElement(\"div\");\n  temp.innerHTML = html;\n\n  loader.appendChild(temp.firstChild);\n}\nfunction removeLoginButton() {\n  const login = document.getElementById(\"harbour-loader-login-button\");\n  const loader = document.getElementById(\"harbour-loader\");\n\n  login && loader && loader.removeChild(login);\n}\n","\nimport UI from \"./ui\";\n\nexport const player = {\n  isLoggedIn,\n  checkLoginStatus,\n  login,\n  onLoginButtonPress,\n  setLoginCallback,\n\n  getID,\n  getName,\n  getPhoto,\n  getEmail,\n  getDataAsync,\n  setDataAsync,\n  getStatsAsync,\n  setStatsAsync,\n  incrementStatsAsync,\n  flushDataAsync,\n  getConnectedPlayersAsync,\n  getSignedPlayerInfoAsync,\n  canSubscribeBotAsync,\n  subscribeBotAsync,\n};\n\nlet g_isLoggedIn = false;\nlet g_uid;\nlet g_email;\nlet g_name;\nlet g_photoUrl;\nlet g_signedRequest;\nlet g_loginSuccessCallback;\n\nfunction isLoggedIn() {\n  return g_isLoggedIn;\n}\nfunction checkLoginStatus(done) {\n  window.FB.getLoginStatus(response => {\n    if (response.status === \"connected\") {\n      g_uid = response.authResponse.userID;\n      g_signedRequest = response.authResponse.signedRequest;\n      _postLogin(done);\n    } else {\n      g_isLoggedIn = false;\n      done();\n    }\n  });\n}\n\nfunction login() {\n  const opts = { scope: \"email\" };\n\n  window.FB.login(response => {\n    if (response && response.status === \"connected\") {\n      g_uid = response.authResponse.userID;\n      _postLogin();\n    }\n  },opts);\n}\nfunction _postLogin(done) {\n  const fields = \"email,name,picture.type(large)\";\n\n  window.FB.api(\"/me\",{ fields },response => {\n    if (!response || response.error) {\n      console.error(\"FB login failed:\",response);\n    } else {\n      g_email = response.email;\n      g_name = response.name;\n      g_photoUrl = _getUrl(response.picture);\n      g_isLoggedIn = true;\n      g_loginSuccessCallback && g_loginSuccessCallback();\n      g_loginSuccessCallback = null;\n      UI.removeLoginButton();\n    }\n    done && done();\n  });\n}\n\nfunction onLoginButtonPress() {\n  login();\n}\nfunction setLoginCallback(cb) {\n  g_loginSuccessCallback = cb;\n}\n\nfunction getID() {\n  return g_uid;\n}\nfunction getName() {\n  return g_name;\n}\nfunction getPhoto() {\n  return g_photoUrl;\n}\nfunction getEmail() {\n  return g_email;\n}\nfunction getDataAsync() {\n\n}\nfunction setDataAsync() {\n\n}\nfunction getStatsAsync() {\n\n}\nfunction setStatsAsync() {\n\n}\nfunction incrementStatsAsync() {\n\n}\nfunction flushDataAsync() {\n\n}\nfunction getConnectedPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction getSignedPlayerInfoAsync() {\n  return Promise.resolve({\n    getSignature: () => g_signedRequest,\n    getPlayerID: getID,\n  });\n}\nfunction canSubscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction subscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n\nfunction _getUrl(obj) {\n  return obj && obj.data && obj.data.url;\n}\n","\nexport const context = {\n  getID,\n  chooseAsync,\n  switchAsync,\n  createAsync,\n  getType,\n  isSizeBetween,\n  getPlayersAsync,\n};\n\nfunction getID() {\n  return null;\n}\nfunction getType() {\n  return \"SOLO\";\n}\nfunction chooseAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction createAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction isSizeBetween() {\n  return null;\n}\nfunction getPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n","\nimport { asyncSeries, } from \"./tools/util.js\";\n\nimport { payments } from \"./payments\";\nimport { player } from \"./player\"\nimport { context } from \"./context\";\nimport UI from \"./ui\";\n\nconst HarbourSDK = {\n  player,\n  context,\n  payments,\n  getLocale,\n  initializeAsync,\n  setLoadingProgress,\n  startGameAsync,\n  quit,\n  updateAsync,\n  getEntryPointData,\n  getEntryPointAsync,\n  setSessionData,\n  getPlatform,\n  getSDKVersion,\n  getSupportedAPIs,\n  shareAsync,\n  switchGameAsync,\n  logEvent,\n  onPause,\n  getInterstitialAdAsync,\n  getRewardedVideoAsync,\n  getLeaderboardAsync,\n};\nwindow.HarbourSDK = HarbourSDK;\nwindow.FBInstant = window.FBInstant || HarbourSDK;\n\nlet g_facebookAppId;\n\nfunction getLocale() {\n  let locale = \"en-US\";\n  if (window.navigator) {\n    if (window.navigator.language) {\n      locale = window.navigator.language;\n    } else if (window.navigator.languages && window.navigator.languages[0]) {\n      locale = window.navigator.languages[0];\n    }\n  }\n  return locale;\n}\nfunction initializeAsync(opts) {\n  g_facebookAppId = opts.facebookAppId;\n\n  return new Promise(resolve => {\n    UI.addLoader(opts);\n    resolve();\n\n    asyncSeries([\n      _loadFacebookSDK,\n      player.checkLoginStatus,\n      ],() => {\n        if (!player.isLoggedIn()) {\n          UI.addLoginButton();\n        }\n      }\n    );\n  });\n}\nfunction setLoadingProgress(progress) {\n  return new Promise(resolve => {\n    UI.setLoaderText(progress.toFixed() + \"% Loaded\");\n    resolve();\n  });\n}\nfunction startGameAsync() {\n  return new Promise(resolve => {\n\n    function _startGame() {\n      UI.removeLoader();\n      resolve();\n    }\n\n    if (player.isLoggedIn()) {\n      _startGame();\n    } else {\n      UI.setLoaderText(\"Login to Continue\");\n      player.setLoginCallback(_startGame);\n    }\n  });\n}\nfunction quit() {\n  window.close();\n}\nfunction updateAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getEntryPointData() {\n  return {};\n}\nfunction getEntryPointAsync() {\n  return Promise.resolve(null);\n}\nfunction setSessionData() {\n}\nfunction getPlatform() {\n  return \"WEB\";\n}\nfunction getSDKVersion() {\n  return \"6.2\";\n}\nfunction getSupportedAPIs() {\n  const api_list = [];\n  for (const prop in HarbourSDK) {\n    api_list.push(prop);\n  }\n  for (const prop in HarbourSDK.player) {\n    api_list.push(\"player.\" + prop);\n  }\n  for (const prop in HarbourSDK.context) {\n    api_list.push(\"context.\" + prop);\n  }\n  for (const prop in HarbourSDK.payment) {\n    api_list.push(\"payment.\" + prop);\n  }\n  return api_list;\n}\nfunction shareAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchGameAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction logEvent(eventName,value,parameters) {\n  console.log(\"logEvent:\",eventName,value,parameters);\n  return null;\n}\nfunction onPause(callback) {\n  window.onblur = callback;\n}\nfunction getInterstitialAdAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getRewardedVideoAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getLeaderboardAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\n\nfunction _loadFacebookSDK(done) {\n  /* eslint-disable */\n  window.fbAsyncInit = function() {\n    FB.init({\n      appId: g_facebookAppId,\n      autoLogAppEvents: false,\n      xfbml: false,\n      version: \"v3.2\",\n    });\n    done();\n  };\n  (function(d, s, id){\n     var js, fjs = d.getElementsByTagName(s)[0];\n     if (d.getElementById(id)) {return;}\n     js = d.createElement(s); js.id = id;\n     js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n     fjs.parentNode.insertBefore(js, fjs);\n   }(document, \"script\", \"facebook-jssdk\"));\n  /* eslint-enable */\n}\n"],"names":["asyncSeries","list","callback","_run","index","item","err","resolveStyles","obj","_addStyle","arg","Array","isArray","forEach","key","args","s","val","payments","onReady","getCatalogAsync","purchaseAsync","consumePurchaseAsync","addLoader","removeLoader","setLoaderText","addLoginButton","removeLoginButton","styles","loader","position","top","bottom","left","right","background","display","cover","middleLoader","width","height","overflow","icon","margin","spinner","border","animation","loaderText","color","loginButton","cursor","loginIcon","loginText","opts","loader_style","backgroundImage","style","icon_style","iconImage","html","temp","document","createElement","innerHTML","body","appendChild","firstChild","css","type","createTextNode","head","el","getElementById","removeChild","text","text_el","innerText","login","player","isLoggedIn","checkLoginStatus","onLoginButtonPress","setLoginCallback","getID","getName","getPhoto","getEmail","getDataAsync","setDataAsync","getStatsAsync","setStatsAsync","incrementStatsAsync","flushDataAsync","getConnectedPlayersAsync","getSignedPlayerInfoAsync","canSubscribeBotAsync","subscribeBotAsync","g_isLoggedIn","g_uid","g_email","g_name","g_photoUrl","g_signedRequest","g_loginSuccessCallback","done","window","FB","getLoginStatus","response","status","authResponse","userID","signedRequest","_postLogin","scope","fields","api","error","console","email","name","_getUrl","picture","UI","cb","Promise","reject","code","resolve","getSignature","getPlayerID","data","url","context","chooseAsync","switchAsync","createAsync","getType","isSizeBetween","getPlayersAsync","HarbourSDK","getLocale","initializeAsync","setLoadingProgress","startGameAsync","quit","updateAsync","getEntryPointData","getEntryPointAsync","setSessionData","getPlatform","getSDKVersion","getSupportedAPIs","shareAsync","switchGameAsync","logEvent","onPause","getInterstitialAdAsync","getRewardedVideoAsync","getLeaderboardAsync","FBInstant","g_facebookAppId","locale","navigator","language","languages","facebookAppId","_loadFacebookSDK","progress","toFixed","_startGame","close","api_list","prop","push","payment","eventName","value","parameters","log","onblur","fbAsyncInit","init","appId","autoLogAppEvents","xfbml","version","d","id","js","fjs","getElementsByTagName","src","parentNode","insertBefore"],"mappings":"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"}