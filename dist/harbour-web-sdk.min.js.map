{"version":3,"file":"harbour-web-sdk.min.js","sources":["../src/tools/util.js","../src/ui.js","../src/player.js","../src/startup.js","../src/leaderboard.js","../src/payments.js","../src/context.js","../src/index.js"],"sourcesContent":["\nexport function asyncSeries(list,callback) {\n  function _run(index,list,callback) {\n    const item = list[index];\n    if (item) {\n      item(err => {\n        if (err) {\n          callback(err);\n        } else {\n          _run(index + 1,list,callback);\n        }\n      });\n    } else {\n      callback();\n    }\n  }\n  _run(0,list,callback);\n}\n\nexport function resolveStyles(...args) {\n  const obj = {};\n\n  function _addStyle(arg) {\n    if (Array.isArray(arg)) {\n      arg.forEach(_addStyle);\n    } else {\n      for (const key in arg) {\n        obj[key] = arg[key];\n      }\n    }\n  }\n\n  _addStyle(args);\n\n  let s = \"\";\n  for (const key in obj) {\n    const val = obj[key];\n    s += key + \":\" + val + \";\";\n  }\n  return s;\n}\n","\nimport { resolveStyles } from './tools/util.js';\n\nexport default {\n  addLoader,\n  removeLoader,\n  setLoaderText,\n  addLoginButton,\n  removeLoginButton,\n  addBlockError,\n};\n\nconst styles = {\n  loader: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: 'black center center no-repeat',\n    'background-size': 'cover',\n\n    display: 'flex',\n    'flex-direction': 'column',\n    'justify-content': 'center',\n    'align-items': 'center',\n    'font-family': 'Helvetica, Arial, sans-serif',\n    'font-weight': 'normal',\n   },\n  cover: {\n    'z-index': '0',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.5)',\n\n    display: 'flex',\n    'flex-direction': 'column',\n    'justify-content': 'center',\n    'align-items': 'center',\n  },\n  middleLoader: {\n    'z-index': '1',\n    position: 'relative',\n    width: '100px',\n    height: '100px',\n    'border-radius': '50%',\n    overflow: 'hidden',\n  },\n  icon: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    margin: '10px',\n    'border-radius': '50%',\n    background: '#333 center center no-repeat',\n    'background-size': 'cover',\n  },\n  spinner: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    border: '10px solid',\n    'border-color': 'blue black blue black',\n    'border-radius': '50%',\n    animation: 'harbour-loader-spinner 2s linear infinite',\n  },\n  loaderText: {\n    'z-index': '1',\n    'margin-top': '20px',\n    color: 'white',\n    'font-size': '16px',\n    'font-weight': 'bold',\n  },\n  loginButton: {\n    position: 'absolute',\n    bottom: '60px',\n    'margin-left': 'auto',\n    'margin-right': 'auto',\n    height: '40px',\n    width: '236px',\n\n    background: '#4267b2',\n    'border-radius': '4px',\n    cursor: 'pointer',\n\n    display: 'flex',\n    'flex-direction': 'row',\n    'justify-content': 'center',\n    'align-items': 'center',\n  },\n  loginIcon: {\n    position: 'absolute',\n    top: '8px',\n    left: '10px',\n    width: '24px',\n    height: '24px',\n  },\n  loginText: {\n    'margin-left': '24px',\n    'margin-top': '2px',\n    color: 'white',\n    'font-size': '16px',\n  },\n  errorText: {\n    'z-index': '1',\n    'margin-top': '10px',\n    padding: '20px',\n    color: 'red',\n    'font-size': '16px',\n    'text-align': 'center',\n  },\n}\n\nfunction addLoader(opts) {\n  let loader_style;\n  if (opts && opts.backgroundImage) {\n    const style = { 'background-image': 'url(' + opts.backgroundImage + ')' };\n    loader_style = resolveStyles([styles.loader,style]);\n  } else {\n    loader_style = resolveStyles(styles.loader);\n  }\n  let icon_style;\n  if (opts && opts.iconImage) {\n    const style = { 'background-image': 'url(' + opts.iconImage + ')' };\n    icon_style = resolveStyles([styles.icon,style]);\n  } else {\n    icon_style = resolveStyles(styles.icon);\n  }\n\n  const html =\n`<div id='harbour-loader' style='${loader_style}'>\n  <div style='${resolveStyles(styles.cover)}'></div>\n    <div style='${resolveStyles(styles.middleLoader)}'>\n      <div style='${resolveStyles(styles.spinner)}'></div>\n      <div style='${icon_style}'></div>\n    </div>\n    <div id='harbour-loader-text' style='${resolveStyles(styles.loaderText)}'>0% Loaded</div>\n</div>`;\n\n  const temp = document.createElement('div');\n  temp.innerHTML = html;\n\n  document.body.appendChild(temp.firstChild);\n\n  const css =\n`@keyframes harbour-loader-spinner {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n`;\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n}\n\nfunction removeLoader() {\n  const el = document.getElementById('harbour-loader');\n  document.body.removeChild(el);\n}\n\nfunction setLoaderText(text) {\n  const text_el = document.getElementById('harbour-loader-text');\n  text_el.innerText = text\n}\nfunction addLoginButton() {\n  const html =\n`<div id='harbour-loader-login-button' style='${resolveStyles(styles.loginButton)}' onclick='window.HarbourSDK.player.onLoginButtonPress()'>\n  <svg xmlns='http://www.w3.org/2000/svg' style='${resolveStyles(styles.loginIcon)}' viewBox='0 0 216 216' color='#FFFFFF'>\n    <path fill='#FFFFFF' d='\n M204.1 0H11.9C5.3 0 0 5.3 0 11.9v192.2c0 6.6 5.3 11.9 11.9\n 11.9h103.5v-83.6H87.2V99.8h28.1v-24c0-27.9 17-43.1 41.9-43.1\n 11.9 0 22.2.9 25.2 1.3v29.2h-17.3c-13.5 0-16.2 6.4-16.2\n 15.9v20.8h32.3l-4.2 32.6h-28V216h55c6.6 0 11.9-5.3\n 11.9-11.9V11.9C216 5.3 210.7 0 204.1 0z'>\n    </path>\n  </svg>\n  <div style='${resolveStyles(styles.loginText)}'>Continue With Facebook</div>\n</div>`;\n\n   _appendHtmlToLoader(html);\n}\nfunction removeLoginButton() {\n  const login = document.getElementById('harbour-loader-login-button');\n  const loader = document.getElementById('harbour-loader');\n\n  login && loader && loader.removeChild(login);\n}\n\nfunction addBlockError() {\n  const html =\n`<div style='${resolveStyles(styles.errorText)}'>\n  Error communicating with Facebook.<br/>\n  This site requires Facebook login.<br/>\n  Please check your adblocker or reload the page.\n</div>`;\n\n  _appendHtmlToLoader(html);\n}\n\nfunction _appendHtmlToLoader(html) {\n  const loader = document.getElementById('harbour-loader');\n  const temp = document.createElement('div');\n  temp.innerHTML = html;\n  loader.appendChild(temp.firstChild);\n}\n","\nimport UI from \"./ui\";\nimport { getAppID } from './startup.js';\n\nexport const player = {\n  isLoggedIn,\n  checkLoginStatus,\n  login,\n  onLoginButtonPress,\n  setLoginCallback,\n\n  getID,\n  getName,\n  getPhoto,\n  getEmail,\n  getDataAsync,\n  setDataAsync,\n  getStatsAsync,\n  setStatsAsync,\n  incrementStatsAsync,\n  flushDataAsync,\n  getConnectedPlayersAsync,\n  getSignedPlayerInfoAsync,\n  canSubscribeBotAsync,\n  subscribeBotAsync,\n};\n\nlet g_isLoggedIn = false;\nlet g_uid;\nlet g_email;\nlet g_name;\nlet g_photoUrl;\nlet g_signedRequest;\nlet g_accessToken;\nlet g_loginSuccessCallback;\n\nfunction isLoggedIn() {\n  return g_isLoggedIn;\n}\nfunction checkLoginStatus(done) {\n  window.FB.getLoginStatus(response => {\n    if (response.status === \"connected\") {\n      console.log(response);\n      g_uid = response.authResponse.userID;\n      g_signedRequest = response.authResponse.signedRequest;\n      g_accessToken = response.authResponse.accessToken;\n      _postLogin(done);\n    } else {\n      g_isLoggedIn = false;\n      done();\n    }\n  });\n}\n\nfunction login() {\n  const opts = { scope: \"email\" };\n\n  window.FB.login(response => {\n    if (response && response.status === \"connected\") {\n      g_uid = response.authResponse.userID;\n      _postLogin();\n    }\n  },opts);\n}\nfunction _postLogin(done) {\n  const fields = \"email,name,picture.type(large)\";\n\n  window.FB.api(\"/me\",{ fields },response => {\n    if (!response || response.error) {\n      console.error(\"FB login failed:\",response);\n    } else {\n      g_email = response.email;\n      g_name = response.name;\n      g_photoUrl = _getUrl(response.picture);\n      g_isLoggedIn = true;\n      g_loginSuccessCallback && g_loginSuccessCallback();\n      g_loginSuccessCallback = null;\n      UI.removeLoginButton();\n    }\n    done && done();\n  });\n}\n\nfunction onLoginButtonPress() {\n  login();\n}\nfunction setLoginCallback(cb) {\n  g_loginSuccessCallback = cb;\n}\n\nfunction getID() {\n  return g_uid;\n}\nfunction getName() {\n  return g_name;\n}\nfunction getPhoto() {\n  return g_photoUrl;\n}\nfunction getEmail() {\n  return g_email;\n}\nfunction getDataAsync() {\n\n}\nfunction setDataAsync() {\n\n}\nfunction getStatsAsync() {\n\n}\nfunction setStatsAsync() {\n\n}\nfunction incrementStatsAsync() {\n\n}\nfunction flushDataAsync() {\n\n}\nfunction getConnectedPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction getSignedPlayerInfoAsync() {\n  return Promise.resolve({\n    getSignature: () => g_signedRequest,\n    getPlayerID: getID,\n    getAppID,\n    getAccessToken: () => g_accessToken,\n  });\n}\nfunction canSubscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction subscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n\nfunction _getUrl(obj) {\n  return obj && obj.data && obj.data.url;\n}\n","\nimport { asyncSeries, } from \"./tools/util.js\";\nimport UI from \"./ui\";\nimport { player } from \"./player\"\n\nlet g_facebookAppId;\n\nexport function getAppID() {\n  return g_facebookAppId;\n}\n\nexport function initializeAsync(opts) {\n  g_facebookAppId = opts.facebookAppId;\n\n  return new Promise(resolve => {\n    UI.addLoader(opts);\n    resolve();\n\n    asyncSeries([\n      _loadFacebookSDK,\n      player.checkLoginStatus,\n      ],\n      err => {\n        if (err) {\n          UI.addBlockError();\n        } else if (!player.isLoggedIn()) {\n          UI.addLoginButton();\n        }\n      }\n    );\n  });\n}\nexport function setLoadingProgress(progress) {\n  return new Promise(resolve => {\n    UI.setLoaderText(progress.toFixed() + \"% Loaded\");\n    resolve();\n  });\n}\nexport function startGameAsync() {\n  return new Promise(resolve => {\n\n    function _startGame() {\n      UI.removeLoader();\n      resolve();\n    }\n\n    if (player.isLoggedIn()) {\n      _startGame();\n    } else {\n      UI.setLoaderText(\"Login to Continue\");\n      player.setLoginCallback(_startGame);\n    }\n  });\n}\n\nfunction _loadFacebookSDK(done) {\n  /* eslint-disable */\n  window.fbAsyncInit = function() {\n    FB.init({\n      appId: g_facebookAppId,\n      autoLogAppEvents: false,\n      xfbml: false,\n      version: \"v3.2\",\n    });\n    done();\n  };\n  (function(d, s, id){\n     var js, fjs = d.getElementsByTagName(s)[0];\n     if (d.getElementById(id)) {return;}\n     js = d.createElement(s); js.id = id;\n     js.onerror = done;\n     js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n     fjs.parentNode.insertBefore(js, fjs);\n   }(document, \"script\", \"facebook-jssdk\"));\n  /* eslint-enable */\n}\n","\nexport default {\n  getLeaderboardAsync,\n};\n\nexport function getLeaderboardAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\n","\nexport const payments = {\n  onReady,\n  getCatalogAsync,\n  purchaseAsync,\n  consumePurchaseAsync,\n};\n\nfunction onReady() {\n}\nfunction getCatalogAsync() {\n}\nfunction purchaseAsync() {\n}\nfunction consumePurchaseAsync() {\n}\n","\nexport const context = {\n  getID,\n  chooseAsync,\n  switchAsync,\n  createAsync,\n  getType,\n  isSizeBetween,\n  getPlayersAsync,\n};\n\nfunction getID() {\n  return null;\n}\nfunction getType() {\n  return \"SOLO\";\n}\nfunction chooseAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction createAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction isSizeBetween() {\n  return null;\n}\nfunction getPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n","\nimport { initializeAsync, setLoadingProgress, startGameAsync } from './startup.js';\nimport { getLeaderboardAsync } from './leaderboard.js';\nimport { payments } from \"./payments\";\nimport { player } from \"./player\"\nimport { context } from \"./context\";\n\nconst HarbourSDK = {\n  player,\n  context,\n  payments,\n  getLocale,\n  initializeAsync,\n  setLoadingProgress,\n  startGameAsync,\n  quit,\n  updateAsync,\n  getEntryPointData,\n  getEntryPointAsync,\n  setSessionData,\n  getPlatform,\n  getSDKVersion,\n  getSupportedAPIs,\n  shareAsync,\n  switchGameAsync,\n  logEvent,\n  onPause,\n  getInterstitialAdAsync,\n  getRewardedVideoAsync,\n  getLeaderboardAsync,\n};\n\nwindow.HarbourSDK = HarbourSDK;\nwindow.FBInstant = window.FBInstant || HarbourSDK;\n\nfunction getLocale() {\n  let locale = \"en-US\";\n  if (window.navigator) {\n    if (window.navigator.language) {\n      locale = window.navigator.language;\n    } else if (window.navigator.languages && window.navigator.languages[0]) {\n      locale = window.navigator.languages[0];\n    }\n  }\n  return locale;\n}\nfunction quit() {\n  window.close();\n}\nfunction updateAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getEntryPointData() {\n  return {};\n}\nfunction getEntryPointAsync() {\n  return Promise.resolve(null);\n}\nfunction setSessionData() {\n}\nfunction getPlatform() {\n  return \"WEB\";\n}\nfunction getSDKVersion() {\n  return \"6.2\";\n}\nfunction getSupportedAPIs() {\n  const api_list = [];\n  for (const prop in HarbourSDK) {\n    api_list.push(prop);\n  }\n  for (const prop in HarbourSDK.player) {\n    api_list.push(\"player.\" + prop);\n  }\n  for (const prop in HarbourSDK.context) {\n    api_list.push(\"context.\" + prop);\n  }\n  for (const prop in HarbourSDK.payment) {\n    api_list.push(\"payment.\" + prop);\n  }\n  return api_list;\n}\nfunction shareAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchGameAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction logEvent(eventName,value,parameters) {\n  console.log(\"logEvent:\",eventName,value,parameters);\n  return null;\n}\nfunction onPause(callback) {\n  window.onblur = callback;\n}\nfunction getInterstitialAdAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getRewardedVideoAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\n"],"names":["asyncSeries","list","callback","_run","index","item","err","resolveStyles","obj","_addStyle","arg","Array","isArray","forEach","key","args","s","val","addLoader","removeLoader","setLoaderText","addLoginButton","removeLoginButton","addBlockError","styles","loader","position","top","bottom","left","right","background","display","cover","middleLoader","width","height","overflow","icon","margin","spinner","border","animation","loaderText","color","loginButton","cursor","loginIcon","loginText","errorText","padding","opts","loader_style","backgroundImage","style","icon_style","iconImage","html","temp","document","createElement","innerHTML","body","appendChild","firstChild","css","type","createTextNode","head","el","getElementById","removeChild","text","text_el","innerText","_appendHtmlToLoader","login","player","isLoggedIn","checkLoginStatus","onLoginButtonPress","setLoginCallback","getID","getName","getPhoto","getEmail","getDataAsync","setDataAsync","getStatsAsync","setStatsAsync","incrementStatsAsync","flushDataAsync","getConnectedPlayersAsync","getSignedPlayerInfoAsync","canSubscribeBotAsync","subscribeBotAsync","g_isLoggedIn","g_uid","g_email","g_name","g_photoUrl","g_signedRequest","g_accessToken","g_loginSuccessCallback","done","window","FB","getLoginStatus","response","status","console","log","authResponse","userID","signedRequest","accessToken","_postLogin","scope","fields","api","error","email","name","_getUrl","picture","UI","cb","Promise","reject","code","resolve","getSignature","getPlayerID","getAppID","getAccessToken","data","url","g_facebookAppId","initializeAsync","facebookAppId","_loadFacebookSDK","setLoadingProgress","progress","toFixed","startGameAsync","_startGame","fbAsyncInit","init","appId","autoLogAppEvents","xfbml","version","d","id","js","fjs","getElementsByTagName","onerror","src","parentNode","insertBefore","getLeaderboardAsync","payments","onReady","getCatalogAsync","purchaseAsync","consumePurchaseAsync","context","chooseAsync","switchAsync","createAsync","getType","isSizeBetween","getPlayersAsync","HarbourSDK","getLocale","quit","updateAsync","getEntryPointData","getEntryPointAsync","setSessionData","getPlatform","getSDKVersion","getSupportedAPIs","shareAsync","switchGameAsync","logEvent","onPause","getInterstitialAdAsync","getRewardedVideoAsync","FBInstant","locale","navigator","language","languages","close","api_list","prop","push","payment","eventName","value","parameters","onblur"],"mappings":"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"}