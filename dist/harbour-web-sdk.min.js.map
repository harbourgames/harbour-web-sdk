{"version":3,"file":"harbour-web-sdk.min.js","sources":["../src/tools/util.js","../src/ui.js","../src/player.js","../src/payments.js","../src/startup.js","../src/index.js","../src/context.js","../src/leaderboard.js"],"sourcesContent":["\nexport function asyncSeries(list,callback) {\n  function _run(index,list,callback) {\n    const item = list[index];\n    if (item) {\n      item(err => {\n        if (err) {\n          callback(err);\n        } else {\n          _run(index + 1,list,callback);\n        }\n      });\n    } else {\n      callback();\n    }\n  }\n  _run(0,list,callback);\n}\nexport function resolveStyles(...args) {\n  const obj = {};\n\n  function _addStyle(arg) {\n    if (Array.isArray(arg)) {\n      arg.forEach(_addStyle);\n    } else {\n      for (const key in arg) {\n        obj[key] = arg[key];\n      }\n    }\n  }\n\n  _addStyle(args);\n\n  let s = \"\";\n  for (const key in obj) {\n    const val = obj[key];\n    s += key + \":\" + val + \";\";\n  }\n  return s;\n}\nexport function queryString(query) {\n  const query_list = [];\n  for (const key in query) {\n    const val = query[key];\n    query_list.push(`${encodeURIComponent(key)}=${encodeURIComponent(val)}`);\n  }\n  return query_list.join(\"&\");\n}\nexport function loadScript(url,done) {\n  const new_script = document.createElement(\"script\");\n  new_script.onerror = done;\n  new_script.onload = event => done(null,event);\n  document.head.appendChild(new_script);\n  new_script.src = url;\n}\n","\nimport { resolveStyles } from './tools/util.js';\n\nexport default {\n  addLoader,\n  removeLoader,\n  setLoaderText,\n  addLoginButton,\n  removeLoginButton,\n  addBlockError,\n};\n\nconst styles = {\n  loader: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: 'transparent center center no-repeat',\n    'background-size': 'cover',\n\n    display: 'flex',\n    'flex-direction': 'column',\n    'justify-content': 'center',\n    'align-items': 'center',\n    'font-family': 'Helvetica, Arial, sans-serif',\n    'font-weight': 'normal',\n   },\n  cover: {\n    'z-index': '0',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.3)',\n\n    display: 'flex',\n    'flex-direction': 'column',\n    'justify-content': 'center',\n    'align-items': 'center',\n  },\n  middleLoader: {\n    'z-index': '1',\n    position: 'relative',\n    width: '100px',\n    height: '100px',\n    'border-radius': '50%',\n    overflow: 'hidden',\n  },\n  icon: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    margin: '10px',\n    'border-radius': '50%',\n    background: '#333 center center no-repeat',\n    'background-size': 'cover',\n  },\n  spinner: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    border: '10px solid',\n    'border-color': 'blue black blue black',\n    'border-radius': '50%',\n    animation: 'harbour-loader-spinner 2s linear infinite',\n  },\n  loaderText: {\n    'z-index': '1',\n    'margin-top': '20px',\n    color: 'white',\n    'font-size': '16px',\n    'font-weight': 'bold',\n    'font-family': 'inherit',\n    'text-shadow': '0 0 5px black',\n  },\n  loginButton: {\n    position: 'absolute',\n    bottom: '60px',\n    'margin-left': 'auto',\n    'margin-right': 'auto',\n    height: '40px',\n    width: '236px',\n\n    background: '#4267b2',\n    'border-radius': '4px',\n    cursor: 'pointer',\n\n    display: 'flex',\n    'flex-direction': 'row',\n    'justify-content': 'center',\n    'align-items': 'center',\n  },\n  loginIcon: {\n    position: 'absolute',\n    top: '8px',\n    left: '10px',\n    width: '24px',\n    height: '24px',\n  },\n  buttonText: {\n    'margin-left': '24px',\n    'margin-top': '2px',\n    color: 'white',\n    'font-size': '16px',\n    'font-family': 'inherit',\n  },\n  errorText: {\n    'z-index': '1',\n    'margin-top': '10px',\n    padding: '20px',\n    color: 'red',\n    'font-size': '16px',\n    'font-family': 'inherit',\n    'text-align': 'center',\n    'text-shadow': '0 0 5px black',\n  },\n}\n\nfunction addLoader(opts) {\n  let loader_style;\n  if (opts && opts.backgroundImage) {\n    const style = { 'background-image': 'url(' + opts.backgroundImage + ')' };\n    loader_style = resolveStyles([styles.loader,style]);\n  } else {\n    loader_style = resolveStyles(styles.loader);\n  }\n  let icon_style;\n  if (opts && opts.iconImage) {\n    const style = { 'background-image': 'url(' + opts.iconImage + ')' };\n    icon_style = resolveStyles([styles.icon,style]);\n  } else {\n    icon_style = resolveStyles(styles.icon);\n  }\n\n  const html =\n`<div id='harbour-loader' style='${loader_style}'>\n  <div class='harbour-cover' style='${resolveStyles(styles.cover)}'></div>\n  <div class='harbour-loader' style='${resolveStyles(styles.middleLoader)}'>\n    <div class='harbour-spinner' style='${resolveStyles(styles.spinner)}'></div>\n    <div class='harbour-spinner-icon' style='${icon_style}'></div>\n  </div>\n  <div id='harbour-loader-text' style='${resolveStyles(styles.loaderText)}'>0% Loaded</div>\n</div>`;\n\n  const temp = document.createElement('div');\n  temp.innerHTML = html;\n\n  document.body.appendChild(temp.firstChild);\n\n  const css =\n`@keyframes harbour-loader-spinner {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n`;\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n}\n\nfunction removeLoader() {\n  const el = document.getElementById('harbour-loader');\n  document.body.removeChild(el);\n}\n\nfunction setLoaderText(text) {\n  const text_el = document.getElementById('harbour-loader-text');\n  text_el.innerText = text\n}\nfunction addLoginButton() {\n  const html =\n`<div id='harbour-loader-login-button' style='${resolveStyles(styles.loginButton)}' onclick='window.HarbourSDK.player.onLoginButtonPress()'>\n  <svg xmlns='http://www.w3.org/2000/svg' style='${resolveStyles(styles.loginIcon)}' viewBox='0 0 216 216' color='#FFFFFF'>\n    <path fill='#FFFFFF' d='\n M204.1 0H11.9C5.3 0 0 5.3 0 11.9v192.2c0 6.6 5.3 11.9 11.9\n 11.9h103.5v-83.6H87.2V99.8h28.1v-24c0-27.9 17-43.1 41.9-43.1\n 11.9 0 22.2.9 25.2 1.3v29.2h-17.3c-13.5 0-16.2 6.4-16.2\n 15.9v20.8h32.3l-4.2 32.6h-28V216h55c6.6 0 11.9-5.3\n 11.9-11.9V11.9C216 5.3 210.7 0 204.1 0z'>\n    </path>\n  </svg>\n  <div style='${resolveStyles(styles.buttonText)}'>Continue With Facebook</div>\n</div>`;\n\n   _appendHtmlToLoader(html);\n}\nfunction removeLoginButton() {\n  const login = document.getElementById('harbour-loader-login-button');\n  const loader = document.getElementById('harbour-loader');\n\n  login && loader && loader.removeChild(login);\n}\n\nfunction addBlockError() {\n  const html =\n`<div style='${resolveStyles(styles.errorText)}'>\n  Error communicating with Facebook.<br/>\n  This site requires Facebook login.<br/>\n  Please check your adblocker or reload the page.\n</div>`;\n\n  _appendHtmlToLoader(html);\n}\n\nfunction _appendHtmlToLoader(html) {\n  const loader = document.getElementById('harbour-loader');\n  const temp = document.createElement('div');\n  temp.innerHTML = html;\n  loader.appendChild(temp.firstChild);\n}\n","\nimport UI from \"./ui\";\nimport { queryString } from './tools/util.js';\n\nexport const player = {\n  setConfig,\n  isLoggedIn,\n  checkLoginStatus,\n  login,\n  onLoginButtonPress,\n  setLoginCallback,\n\n  getID,\n  getName,\n  getPhoto,\n  getEmail,\n  getDataAsync,\n  setDataAsync,\n  getStatsAsync,\n  setStatsAsync,\n  incrementStatsAsync,\n  flushDataAsync,\n  getConnectedPlayersAsync,\n  getSignedPlayerInfoAsync,\n  canSubscribeBotAsync,\n  subscribeBotAsync,\n};\n\nlet g_facebookAppId;\nlet g_oauthRedirectUrl;\nlet g_isLoggedIn = false;\nlet g_uid;\nlet g_email;\nlet g_name;\nlet g_photoUrl;\nlet g_signedRequest;\nlet g_accessToken;\nlet g_loginSuccessCallback;\n\nfunction setConfig(params) {\n  g_facebookAppId = params.facebookAppId;\n  g_oauthRedirectUrl = params.oauthRedirectUrl;\n}\n\nfunction isLoggedIn() {\n  return g_isLoggedIn;\n}\nfunction checkLoginStatus(done) {\n  window.FB.getLoginStatus(response => {\n    if (response.status === \"connected\") {\n      const run_post_login = !g_accessToken;\n      g_uid = response.authResponse.userID;\n      g_signedRequest = response.authResponse.signedRequest;\n      g_accessToken = response.authResponse.accessToken;\n      if (run_post_login) {\n        _postLogin(null,done);\n      }\n    } else {\n      g_isLoggedIn = false;\n      done && done();\n    }\n  });\n}\n\nfunction login(opts,done) {\n  const is_chrome_app = window.matchMedia &&\n    window.matchMedia('(display-mode: fullscreen),(display-mode: standalone)').matches;\n\n  if (is_chrome_app) {\n    _oathLogin(opts,done);\n  } else {\n    const scope = \"email\";\n    const opts = { scope: scope };\n    window.FB.login(response => {\n      if (response && response.status === \"connected\") {\n        g_uid = response.authResponse.userID;\n        g_signedRequest = response.authResponse.signedRequest;\n        g_accessToken = response.authResponse.accessToken;\n        _postLogin(null,() => {\n          done();\n        });\n      } else {\n        done && done('sdk_login_fail');\n      }\n    },opts);\n  }\n}\nfunction _oathLogin(opts,done) {\n  addEventListener('message',_loginListener);\n\n  const query = {\n    client_id: g_facebookAppId,\n    scope: 'email',\n    response_type: 'signed_request,token',\n    redirect_uri: g_oauthRedirectUrl,\n  };\n  if (opts && opts.state) {\n    query.state = opts.state;\n  }\n  const url = 'https://www.facebook.com/v3.1/dialog/oauth?' + queryString(query);\n  const popup = window.open(url,'Facebook Login');\n  const interval_checker = setInterval(() => {\n    if (popup.closed || g_isLoggedIn || g_accessToken) {\n      clearInterval(interval_checker);\n      removeEventListener('message',_loginListener);\n      if (g_accessToken) {\n        done && done();\n      } else {\n        checkLoginStatus(() => {\n          let err;\n          if (!g_isLoggedIn) {\n            err = 'oath_not_logged_in';\n          }\n          done && done(err);\n        });\n      }\n    }\n  },200);\n}\n\nfunction _loginListener(event) {\n  if (event && event.data) {\n    const url = new URL(event.data);\n    const hash = url.hash.substring(1);\n    const hash_split = hash.split('&');\n    const hash_map = {};\n    hash_split.forEach(s => {\n      const s_split = s.split('=');\n      hash_map[s_split[0]] = s_split[1];\n    });\n    if (hash_map.access_token && !g_accessToken) {\n      g_accessToken = hash_map.access_token;\n    }\n    if (hash_map.signed_reqest && !g_signedRequest) {\n      g_signedRequest = hash_map.signed_reqest;\n    }\n    _postLogin(g_accessToken);\n  }\n}\n\nfunction _postLogin(access_token,done) {\n  const fields = \"id,email,name,picture.type(large)\";\n  const opts = {\n    fields,\n  };\n  if (access_token) {\n    opts.access_token = access_token;\n  }\n  window.FB.api(\"/me\",opts,response => {\n    let err;\n    if (!response || response.error) {\n      console.error(\"FB login failed:\",response);\n      err = 'sdk_not_logged_in';\n    } else {\n      g_uid = response.id;\n      g_email = response.email;\n      g_name = response.name;\n      g_photoUrl = _getUrl(response.picture);\n      g_isLoggedIn = true;\n      g_loginSuccessCallback && g_loginSuccessCallback();\n      g_loginSuccessCallback = null;\n      UI.removeLoginButton();\n    }\n    done && done(err);\n  });\n}\n\nfunction onLoginButtonPress() {\n  login();\n}\nfunction setLoginCallback(cb) {\n  g_loginSuccessCallback = cb;\n}\n\nfunction getID() {\n  return g_uid;\n}\nfunction getName() {\n  return g_name;\n}\nfunction getPhoto() {\n  return g_photoUrl;\n}\nfunction getEmail() {\n  return g_email;\n}\nfunction getDataAsync() {\n\n}\nfunction setDataAsync() {\n\n}\nfunction getStatsAsync() {\n\n}\nfunction setStatsAsync() {\n\n}\nfunction incrementStatsAsync() {\n\n}\nfunction flushDataAsync() {\n\n}\nfunction getConnectedPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction getSignedPlayerInfoAsync() {\n  return Promise.resolve({\n    getSignature: () => g_signedRequest,\n    getPlayerID: getID,\n    getAppID: () => g_facebookAppId,\n    getAccessToken: () => g_accessToken,\n  });\n}\nfunction canSubscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\nfunction subscribeBotAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n\nfunction _getUrl(obj) {\n  return obj && obj.data && obj.data.url;\n}\n","\nimport { loadScript } from './tools/util.js';\n\nexport const payments = {\n  setConfig,\n  onReady,\n  getCatalogAsync,\n  purchaseAsync,\n  getPurchasesAsync,\n  consumePurchaseAsync,\n};\n\nconst STRIPE_SRC = 'https://checkout.stripe.com/checkout.js';\n\nlet g_ready = false;\nlet g_readyHandlers = null;\nlet g_handler = null;\nlet g_stripeConfig;\nlet g_is_sandbox = false;\n\nwindow.addEventListener('popstate',() => {\n  g_handler && g_handler.close();\n});\n\nfunction setConfig(params) {\n  g_stripeConfig = params.stripeConfig;\n  g_is_sandbox = g_stripeConfig && g_stripeConfig.is_sandbox;\n}\n\nfunction onReady(callback) {\n  if (g_ready) {\n    callback && callback();\n  } else if (g_readyHandlers) {\n    g_readyHandlers.push(callback);\n  } else {\n    g_readyHandlers = [callback];\n    _init();\n  }\n}\n\nfunction _init() {\n  loadScript(STRIPE_SRC,err => {\n    if (!err) {\n      g_handler = window.StripeCheckout.configure(g_stripeConfig);\n      g_ready = true;\n    }\n    g_readyHandlers.forEach(callback => callback && callback());\n    g_readyHandlers.splice(0);\n  });\n}\n\nfunction getCatalogAsync() {\n  return Promise.resolve([]);\n}\n\nfunction purchaseAsync(params) {\n  const { productID, description, amountUsd } = params;\n\n  return new Promise((resolve,reject) => {\n    let is_done = false;\n    g_handler.open({\n      description,\n      amount: Math.round(amountUsd * 100),\n      token: token => {\n        if (token && token.id) {\n          const token_id = token.id;\n          resolve({\n            paymentID: '...',\n            productID: productID,\n            purchaseTime: String(Math.round(Date.now() / 1000)),\n            purchaseToken: token_id,\n            signedRequest: '...',\n            stripeTokenId: token_id,\n            stripeCardFingerprint: token.card && token.card.fingerprint,\n            stripeEmail: token.email,\n            isSandbox: g_is_sandbox,\n          });\n        } else if (!is_done) {\n          reject({ code: 'USER_INPUT' });\n          is_done = true;\n        }\n      },\n      closed: () => {\n        if (!is_done) {\n          reject({ code:'USER_INPUT' });\n          is_done = true;\n        }\n      },\n    });\n  });\n}\n\nfunction getPurchasesAsync() {\n  return Promise.resolve([]);\n}\nfunction consumePurchaseAsync() {\n  return Promise.resolve();\n}\n","\nimport { asyncSeries, } from './tools/util.js';\nimport UI from './ui';\nimport { player } from './player';\nimport { payments } from './payments';\n\nlet g_requiresLogin;\nlet g_facebookAppId;\n\nexport function initializeAsync(params) {\n  g_facebookAppId = params.facebookAppId;\n  g_requiresLogin = params.requiresLogin || false;\n\n  player.setConfig(params);\n  payments.setConfig(params);\n\n  return new Promise(resolve => {\n    UI.addLoader(params);\n    resolve();\n\n    asyncSeries([\n      _loadFacebookSDK,\n      player.checkLoginStatus,\n      ],\n      err => {\n        if (err) {\n          UI.addBlockError();\n        } else if (!player.isLoggedIn() && g_requiresLogin) {\n          UI.addLoginButton();\n        }\n      }\n    );\n  });\n}\nexport function setLoadingProgress(progress) {\n  return new Promise(resolve => {\n    UI.setLoaderText(`${progress.toFixed()}% Loaded`);\n    resolve();\n  });\n}\nexport function startGameAsync() {\n  return new Promise(resolve => {\n\n    function _startGame() {\n      UI.removeLoader();\n      resolve();\n    }\n\n    if (player.isLoggedIn() || !g_requiresLogin) {\n      _startGame();\n    } else {\n      UI.setLoaderText(\"Login to Continue\");\n      player.setLoginCallback(_startGame);\n    }\n  });\n}\n\nfunction _loadFacebookSDK(done) {\n  /* eslint-disable */\n  window.fbAsyncInit = function() {\n    FB.init({\n      appId: g_facebookAppId,\n      autoLogAppEvents: false,\n      xfbml: false,\n      version: \"v3.2\",\n    });\n    done();\n  };\n  (function(d, s, id){\n     var js, fjs = d.getElementsByTagName(s)[0];\n     if (d.getElementById(id)) {return;}\n     js = d.createElement(s); js.id = id;\n     js.onerror = done;\n     js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n     fjs.parentNode.insertBefore(js, fjs);\n   }(document, \"script\", \"facebook-jssdk\"));\n  /* eslint-enable */\n}\n","\nimport { initializeAsync, setLoadingProgress, startGameAsync } from './startup.js';\nimport { getLeaderboardAsync } from './leaderboard.js';\nimport { payments } from \"./payments\";\nimport { player } from \"./player\"\nimport { context } from \"./context\";\n\nconst HarbourSDK = {\n  player,\n  context,\n  payments,\n  getLocale,\n  initializeAsync,\n  setLoadingProgress,\n  startGameAsync,\n  quit,\n  updateAsync,\n  getEntryPointData,\n  getEntryPointAsync,\n  setSessionData,\n  getPlatform,\n  getSDKVersion,\n  getSupportedAPIs,\n  shareAsync,\n  switchGameAsync,\n  logEvent,\n  onPause,\n  getInterstitialAdAsync,\n  getRewardedVideoAsync,\n  getLeaderboardAsync,\n};\n\nwindow.HarbourSDK = HarbourSDK;\nwindow.FBInstant = window.FBInstant || HarbourSDK;\n\nfunction getLocale() {\n  let locale = \"en-US\";\n  if (window.navigator) {\n    if (window.navigator.language) {\n      locale = window.navigator.language;\n    } else if (window.navigator.languages && window.navigator.languages[0]) {\n      locale = window.navigator.languages[0];\n    }\n  }\n  return locale;\n}\nfunction quit() {\n  window.close();\n}\nfunction updateAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getEntryPointData() {\n  return {};\n}\nfunction getEntryPointAsync() {\n  return Promise.resolve(null);\n}\nfunction setSessionData() {\n}\nfunction getPlatform() {\n  return \"WEB\";\n}\nfunction getSDKVersion() {\n  return \"6.2\";\n}\nfunction getSupportedAPIs() {\n  const api_list = [];\n  for (const prop in HarbourSDK) {\n    api_list.push(prop);\n  }\n  for (const prop in HarbourSDK.player) {\n    api_list.push(\"player.\" + prop);\n  }\n  for (const prop in HarbourSDK.context) {\n    api_list.push(\"context.\" + prop);\n  }\n  for (const prop in HarbourSDK.payment) {\n    api_list.push(\"payment.\" + prop);\n  }\n  return api_list;\n}\nfunction shareAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchGameAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction logEvent() {\n  return null;\n}\nfunction onPause(callback) {\n  window.onblur = callback;\n}\nfunction getInterstitialAdAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\nfunction getRewardedVideoAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\n","\nexport const context = {\n  getID,\n  chooseAsync,\n  switchAsync,\n  createAsync,\n  getType,\n  isSizeBetween,\n  getPlayersAsync,\n};\n\nfunction getID() {\n  return null;\n}\nfunction getType() {\n  return \"SOLO\";\n}\nfunction chooseAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction createAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction switchAsync() {\n  return Promise.reject({ code: \"USER_CANCEL\", });\n}\nfunction isSizeBetween() {\n  return null;\n}\nfunction getPlayersAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\" });\n}\n","\nexport default {\n  getLeaderboardAsync,\n};\n\nexport function getLeaderboardAsync() {\n  return Promise.reject({ code: \"CLIENT_UNSUPPORTED_OPERATION\", });\n}\n"],"names":["resolveStyles","obj","args","_addStyle","arg","Array","isArray","forEach","key","s","opts","loader_style","backgroundImage","style","background-image","styles","loader","icon_style","iconImage","icon","html","cover","middleLoader","spinner","loaderText","temp","document","createElement","innerHTML","body","appendChild","firstChild","type","createTextNode","head","el","getElementById","removeChild","text","innerText","loginButton","loginIcon","buttonText","login","errorText","_appendHtmlToLoader","player","params","facebookAppId","oauthRedirectUrl","g_isLoggedIn","cb","g_name","g_photoUrl","g_email","Promise","reject","code","resolve","g_signedRequest","getID","g_facebookAppId","g_accessToken","g_oauthRedirectUrl","g_uid","g_loginSuccessCallback","checkLoginStatus","done","FB","getLoginStatus","response","status","run_post_login","authResponse","userID","signedRequest","accessToken","window","matchMedia","matches","_loginListener","query","state","url","query_list","val","push","encodeURIComponent","join","queryString","popup","open","interval_checker","setInterval","closed","err","scope","event","data","hash_map","URL","hash","substring","split","s_split","access_token","signed_reqest","_postLogin","api","error","id","email","name","picture","removeLoginButton","payments","stripeConfig","g_stripeConfig","is_sandbox","callback","g_ready","g_readyHandlers","STRIPE_SRC","StripeCheckout","configure","splice","new_script","onerror","onload","src","productID","description","amountUsd","is_done","Math","round","token","token_id","String","Date","now","card","fingerprint","g_is_sandbox","g_handler","addEventListener","close","g_requiresLogin","_loadFacebookSDK","d","js","fjs","fbAsyncInit","init","getElementsByTagName","parentNode","insertBefore","HarbourSDK","locale","navigator","language","languages","requiresLogin","setConfig","addLoader","_run","index","list","item","addBlockError","isLoggedIn","addLoginButton","progress","setLoaderText","toFixed","_startGame","removeLoader","setLoginCallback","api_list","prop","context","payment","onblur","FBInstant"],"mappings":"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"}